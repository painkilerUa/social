webpackJsonp([1],{19:function(t,e,s){"use strict";var r=s(7),a=s(89),o=s(81),n=s.n(o),i=s(83),l=s.n(i),c=s(82),u=s.n(c);r.a.use(a.a),e.a=new a.a({routes:[{path:"/login",component:n.a},{path:"/register",component:l.a},{path:"/profile",component:u.a}]})},32:function(t,e,s){"use strict";s.d(e,"a",function(){return l});var r=s(7),a=s(2),o=s(42),n=s(43),i=s(41);r.a.use(a.c);var l=new a.c.Store({state:{user:{authorized:!1,superuser:!1},userList:null,msg:{text:"",className:{"alert-success":!1,"alert-danger":!1}},showPreloader:!1},getters:o,mutations:n,actions:i})},33:function(t,e,s){function r(t){s(79)}var a=s(6)(s(35),s(88),r,null,null);t.exports=a.exports},35:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(3),a=s.n(r),o=s(80),n=s.n(o),i=s(2);e.default={name:"app",components:{AppHeader:n.a},computed:a()({},s.i(i.a)(["getMsg"]))}},36:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(3),a=s.n(r),o=s(2);e.default={data:function(){return{}},methods:a()({},s.i(o.b)(["logout"])),computed:a()({},s.i(o.a)(["getUserInfo"]))}},37:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(3),a=s.n(r),o=s(2);e.default={data:function(){return{user:{login:null,password:null}}},methods:a()({},s.i(o.b)(["login"]))}},38:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(45),a=s.n(r),o=s(3),n=s.n(o),i=s(2);e.default={data:function(){return{user:{user_name:null,user_age:null},formData:new FormData,isShownFormProfile:!1,checkedUserForLock:[]}},methods:n()({},s.i(i.b)(["getUserInformation","editUserProfileAction","lockUserProfileAction"]),{upload:function(t){this.formData.set("images",t.target.files[0])},editUserProfile:function(){var t={method:"editProfile",data:this.user},e=a()(t);this.formData.set("data",e),this.editUserProfileAction(this.formData)},lockUserProfile:function(t){var e={method:"lockUsers",data:t},s=a()(e),r=new FormData;r.set("data",s),this.lockUserProfileAction(r)}}),computed:n()({},s.i(i.a)(["getUserInfo","getUserList","showPreloader"])),created:function(){this.getUserInformation()}}},39:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(3),a=s.n(r),o=s(2);e.default={data:function(){return{user:{username:null,password:null}}},methods:a()({},s.i(o.b)(["register"]))}},40:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(7),a=s(34),o=s(33),n=s.n(o),i=s(19),l=s(32);r.a.config.productionTip=!1,r.a.use(a.a),new r.a({el:"#app",router:i.a,store:l.a,template:"<App/>",components:{App:n.a}})},41:function(t,e,s){"use strict";function r(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"get"==e?a.a.http[e](n.serverURL+t,{headers:{Authorization:"Bearer "+localStorage.access_token}}):a.a.http[e](n.serverURL+t,s,{headers:{Authorization:"Bearer "+localStorage.access_token}})}Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"register",function(){return i}),s.d(e,"setInformationMsg",function(){return l}),s.d(e,"login",function(){return c}),s.d(e,"logout",function(){return u}),s.d(e,"getUserInformation",function(){return d}),s.d(e,"editUserProfileAction",function(){return v}),s.d(e,"lockUserProfileAction",function(){return m});var a=s(7),o=s(19),n={serverURL:"http://localhost:3302/api/"},i=function(t,e){var s=t.commit;r("registration","post",e).then(function(t){console.log("resolve",t),l({commit:s},{text:t.body,className:"alert-success"}),o.a.push("/login")}).catch(function(t){console.log("err",t),l({commit:s},{text:t.body,className:"alert-danger"})})},l=function(t,e){var s=t.commit;s("setInformationMsg",{text:e.text,className:e.className}),setTimeout(function(){s("setInformationMsg",{text:"",className:""})},5e3)},c=function(t,e){var s=t.commit;r("login","post",e).then(function(t){console.log("resolve",t),localStorage.setItem("id_token",t.body.id_token),localStorage.setItem("access_token",t.body.access_token),s("logInOut",!0),l({commit:s},{text:"Congratulations!",className:"alert-success"}),d({commit:s}),o.a.push("/profile")}).catch(function(t){console.log("err",t),l({commit:s},{text:t.body,className:"alert-danger"})})},u=function(t,e){(0,t.commit)("logInOut",!1),o.a.push("/login")},d=function(t,e){var s=t.commit;r("profile","get",e).then(function(t){console.log("resolve",t),s("setUserInformation",t.body),s("logInOut",!0)}).catch(function(t){console.log("err",t),l({commit:s},{text:t.body,className:"alert-danger"})})},v=function(t,e){var s=t.commit;s("changePreloaderStatus"),r("profile","put",e).then(function(t){console.log("resolve",t),l({commit:s},{text:t.body,className:"alert-success"}),d({commit:s}),s("changePreloaderStatus")}).catch(function(t){console.log("err",t),l({commit:s},{text:t.body,className:"alert-danger"})})},m=function(t,e){var s=t.commit;s("changePreloaderStatus"),r("profile","put",e).then(function(t){console.log("resolve",t),l({commit:s},{text:t.body,className:"alert-success"}),d({commit:s}),s("changePreloaderStatus")}).catch(function(t){console.log("err",t),l({commit:s},{text:t.body,className:"alert-danger"})})}},42:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"getMsg",function(){return r}),s.d(e,"getUserInfo",function(){return a}),s.d(e,"getUserList",function(){return o}),s.d(e,"showPreloader",function(){return n});var r=function(t){return t.msg},a=function(t){return t.user},o=function(t){return t.userList},n=function(t){return t.showPreloader}},43:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"setInformationMsg",function(){return o}),s.d(e,"logInOut",function(){return n}),s.d(e,"setUserInformation",function(){return i}),s.d(e,"changePreloaderStatus",function(){return l});var r=s(44),a=s.n(r),o=function(t,e){t.msg.text=e.text;for(var s in t.msg.className)t.msg.className[s]=!1;e.className&&(t.msg.className[e.className]=!0)},n=function(t,e){e||(t.user={authorized:!1,superuser:!1},t.userList=null,localStorage.removeItem("access_token"),localStorage.removeItem("id_token")),t.user.authorized=e},i=function(t,e){var s=t.user;for(var r in e.cur_user)s[r]=e.cur_user[r];for(var o in s)"TRUE"===s[o]&&s.hasOwnProperty(o)?s[o]=!0:"FALSE"===s[o]&&s.hasOwnProperty(o)&&(s[o]=!1);t.userList=e.group;var n=!0,i=!1,l=void 0;try{for(var c,u=a()(t.userList);!(n=(c=u.next()).done);n=!0){var d=c.value;for(var v in d)"TRUE"===d[v]&&d.hasOwnProperty(v)?d[v]=!0:"FALSE"===d[v]&&d.hasOwnProperty(v)&&(d[v]=!1)}}catch(t){i=!0,l=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw l}}"admin"===e.cur_user.user_role&&(s.superuser=!0)},l=function(t,e){t.showPreloader=!t.showPreloader}},78:function(t,e){},79:function(t,e){},80:function(t,e,s){function r(t){s(78)}var a=s(6)(s(36),s(84),r,null,null);t.exports=a.exports},81:function(t,e,s){var r=s(6)(s(37),s(87),null,null,null);t.exports=r.exports},82:function(t,e,s){var r=s(6)(s(38),s(86),null,null,null);t.exports=r.exports},83:function(t,e,s){var r=s(6)(s(39),s(85),null,null,null);t.exports=r.exports},84:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar navbar-default container"},[s("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"bs-navbar-collapse-1"}},[s("ul",{staticClass:"nav navbar-nav"},[s("router-link",{attrs:{to:"/profile",tag:"li","active-class":"active"}},[s("a",[t._v("Profile")])]),t._v(" "),t.getUserInfo.authorized?t._e():s("router-link",{attrs:{to:"/register",tag:"li","active-class":"active"}},[s("a",[t._v("Register")])]),t._v(" "),t.getUserInfo.authorized?t._e():s("router-link",{attrs:{to:"/login",tag:"li","active-class":"active"}},[s("a",[t._v("Login")])]),t._v(" "),t.getUserInfo.authorized?s("li",{on:{click:t.logout}},[s("a",[t._v("Logout")])]):t._e()],1)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar-header"},[s("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Awesome")])])}]}},85:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-4"}),t._v(" "),s("div",{staticClass:"col-lg-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"register-username"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"register-username",placeholder:"Paul"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||(t.user.username=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"register-password"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"register-password",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||(t.user.password=e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){t.register(t.user)}}},[t._v("Submit")])]),t._v(" "),s("div",{staticClass:"col-lg-4"})])])},staticRenderFns:[]}},86:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.getUserInfo.authorized?t._e():s("div",{staticClass:"row"},[t._m(0)]),t._v(" "),t.getUserInfo.authorized?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6"},[s("div",{staticClass:"well well-sm"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-6 col-md-4"},[t.getUserInfo.user_avatar_name?t._e():s("img",{staticClass:"img-rounded img-responsive",attrs:{src:"http://placehold.it/380x500",alt:""}}),t._v(" "),t.getUserInfo.user_avatar_name?s("img",{staticClass:"img-rounded img-responsive",attrs:{src:"./avatar/"+t.getUserInfo.user_avatar_name,alt:"#"}}):t._e()]),t._v(" "),s("div",{staticClass:"col-sm-6 col-md-8"},[s("h3",[t._v("Имя: "+t._s(t.getUserInfo.user_name))]),t._v(" "),s("h4",[t._v("Возраст: "+t._s(t.getUserInfo.user_age))]),t._v(" "),t.getUserInfo.is_locked?s("p",[t._v("К сожелению вы не можете редактировать свой профиль. Вы заблокированы. Обратитесь к администратору.")]):t._e(),t._v(" "),s("div",{staticClass:"btn-group"},[t.getUserInfo.is_locked?t._e():s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.isShownFormProfile=!t.isShownFormProfile}}},[t._v("Редактровать")])])])])])])]):t._e(),t._v(" "),t.isShownFormProfile?s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-4"}),t._v(" "),s("div",{staticClass:"col-lg-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"input-name"}},[t._v("Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.user_name,expression:"user.user_name"}],staticClass:"form-control",attrs:{type:"email",id:"input-name"},domProps:{value:t.user.user_name},on:{input:function(e){e.target.composing||(t.user.user_name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"input-age"}},[t._v("Age")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.user_age,expression:"user.user_age"}],staticClass:"form-control",attrs:{type:"text",id:"input-age"},domProps:{value:t.user.user_age},on:{input:function(e){e.target.composing||(t.user.user_age=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"product-image"}},[t._v("Изображение")]),t._v(" "),s("input",{attrs:{type:"file",id:"product-image"},on:{change:function(e){t.upload(e)}}})]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.editUserProfile}},[t._v("Edit")])]),t._v(" "),s("div",{staticClass:"col-lg-4"})]):t._e(),t._v(" "),t.getUserInfo.superuser&&t.getUserList.length>0?s("div",{staticClass:"row"},[s("table",{staticClass:"table table-striped"},[t._m(1),t._v(" "),s("tbody",t._l(t.getUserList,function(e,r){return s("tr",[s("td",{attrs:{scope:"row"}},[t._v(t._s(r+1))]),t._v(" "),s("td",[t._v(t._s(e.user_name))]),t._v(" "),s("td",[t._v(t._s(e.user_age?e.user_age:"not set"))]),t._v(" "),s("td",[t._v(t._s(e.user_avatar_name))]),t._v(" "),s("td",[e.is_locked?t._e():s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(s){t.lockUserProfile({id:e.id,lock:!0})}}},[t._v("Заблокировать")]),t._v(" "),e.is_locked?s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(s){t.lockUserProfile({id:e.id,lock:!1})}}},[t._v("Разблокировать")]):t._e()])])}))])]):t._e()])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"alertv alert-danger"},[s("p",[t._v("For editing profile you should be authorized")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("#")]),t._v(" "),s("th",[t._v("User Name")]),t._v(" "),s("th",[t._v("User Age")]),t._v(" "),s("th",[t._v("Avatar")]),t._v(" "),s("th",[t._v("Lock")])])])}]}},87:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-4"}),t._v(" "),s("div",{staticClass:"col-lg-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"input-login"}},[t._v("Login")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.login,expression:"user.login"}],staticClass:"form-control",attrs:{type:"email",id:"input-login",placeholder:"login"},domProps:{value:t.user.login},on:{input:function(e){e.target.composing||(t.user.login=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"input-password"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"input-password",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||(t.user.password=e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"submit"},on:{click:function(e){t.login(t.user)}}},[t._v("Submit")])]),t._v(" "),s("div",{staticClass:"col-lg-4"})])])},staticRenderFns:[]}},88:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("app-header"),t._v(" "),s("div",{staticClass:"container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.getMsg.text,expression:"getMsg.text"}],staticClass:"alert",class:t.getMsg.className,attrs:{role:"alert"}},[s("p",[t._v(t._s(t.getMsg.text))])])]),t._v(" "),s("router-view")],1)},staticRenderFns:[]}},92:function(t,e){}},[40]);
//# sourceMappingURL=app.1147d8f3afdb322baefc.js.map